<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Argue Against the Machine</title>
  <link rel="stylesheet" href="/styles.css">
</head>
<body>
  <div class="container">
    <!-- Theme Toggle -->
    <div class="theme-toggle">
      <span class="theme-toggle-label">Dark</span>
      <button class="theme-toggle-btn" id="theme-toggle" aria-label="Toggle dark mode"></button>
    </div>

    <!-- Header -->
    <header>
      <nav class="nav-bar">
        <button class="nav-btn" id="nav-back" aria-label="Go back">&#8592;</button>
        <button class="nav-btn" id="nav-home" aria-label="Go home">&#8962;</button>
      </nav>
      <div class="header-title" id="header-home">
        <h1>Argue Against the Machine</h1>
        <p class="tagline">Human vs AI Legal Debate</p>
      </div>
    </header>

    <!-- Screen: Welcome -->
    <section id="welcome-screen" class="screen active">
      <div class="welcome-content">
        <div class="logo-icon">&#9878;</div>
        <h2>Welcome to the Courtroom</h2>
        <p>Test your legal argumentation skills against an AI opponent. An impartial AI judge will evaluate your debate and provide feedback to sharpen your "thinking like a lawyer" abilities.</p>
        <div class="rules">
          <h3>How It Works</h3>
          <ol>
            <li>Choose a legal dilemma</li>
            <li>Pick your side: Prosecution or Defense</li>
            <li>Argue your case over 3 rounds</li>
            <li>Receive a verdict and detailed feedback</li>
          </ol>
        </div>
        <button id="start-btn" class="btn btn-primary">Select a Case</button>
      </div>
    </section>

    <!-- Screen: Case Selection -->
    <section id="case-screen" class="screen">
      <h2>Select Your Case</h2>
      <div class="case-actions">
        <button class="btn btn-secondary" id="create-custom-case">+ Create Custom Case</button>
        <button class="btn btn-secondary" id="generate-ai-case">Generate with AI</button>
      </div>
      <div id="cases-list" class="cases-grid">
        <!-- Cases will be loaded here -->
      </div>
    </section>

    <!-- Screen: Custom Case Creator -->
    <section id="custom-case-screen" class="screen">
      <h2>Create Custom Case</h2>
      <div class="custom-case-form">
        <div class="form-group">
          <label for="custom-title">Case Title</label>
          <input type="text" id="custom-title" placeholder="e.g., The Social Media Privacy Case">
        </div>
        <div class="form-group">
          <label for="custom-description">Case Description</label>
          <textarea id="custom-description" rows="4" placeholder="Describe the facts of the case, the parties involved, and what happened..."></textarea>
        </div>
        <div class="form-group">
          <label for="custom-context">Legal Context</label>
          <textarea id="custom-context" rows="2" placeholder="What legal principles or areas of law does this case explore?"></textarea>
        </div>
        <div class="form-row">
          <div class="form-group half">
            <label for="custom-prosecution">Prosecution/Plaintiff Position</label>
            <textarea id="custom-prosecution" rows="3" placeholder="What is the prosecution or plaintiff arguing?"></textarea>
          </div>
          <div class="form-group half">
            <label for="custom-defense">Defense Position</label>
            <textarea id="custom-defense" rows="3" placeholder="What is the defense arguing?"></textarea>
          </div>
        </div>
        <div class="form-actions">
          <button class="btn btn-secondary" id="cancel-custom-case">Cancel</button>
          <button class="btn btn-primary" id="save-custom-case">Use This Case</button>
        </div>
      </div>
    </section>

    <!-- Screen: AI Case Generator -->
    <section id="ai-case-screen" class="screen">
      <h2>Generate Case with AI</h2>
      <div class="ai-case-form">
        <div class="form-group">
          <label for="ai-case-topic">Describe the type of case you want</label>
          <textarea id="ai-case-topic" rows="3" placeholder="e.g., A case about AI-generated art and copyright, or a medical ethics dilemma involving experimental treatment..."></textarea>
        </div>
        <div class="form-group">
          <label>Complexity</label>
          <div class="complexity-options">
            <button class="complexity-btn active" data-complexity="simple">Simple</button>
            <button class="complexity-btn" data-complexity="moderate">Moderate</button>
            <button class="complexity-btn" data-complexity="complex">Complex</button>
          </div>
        </div>
        <button class="btn btn-primary" id="generate-case-btn">Generate Case</button>
        <div id="generated-case-preview" class="generated-case-preview hidden">
          <h3 id="gen-case-title"></h3>
          <p id="gen-case-description"></p>
          <div class="gen-case-positions">
            <div class="gen-position">
              <strong>Prosecution:</strong>
              <p id="gen-case-prosecution"></p>
            </div>
            <div class="gen-position">
              <strong>Defense:</strong>
              <p id="gen-case-defense"></p>
            </div>
          </div>
          <div class="form-actions">
            <button class="btn btn-secondary" id="regenerate-case">Regenerate</button>
            <button class="btn btn-primary" id="use-generated-case">Use This Case</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Screen: Side Selection -->
    <section id="side-screen" class="screen">
      <h2>Choose Your Side</h2>
      <div id="case-preview" class="case-preview">
        <!-- Selected case info will appear here -->
      </div>
      <div class="side-buttons">
        <button class="btn btn-side prosecution" data-side="prosecution">
          <span class="side-icon">&#9760;</span>
          <span class="side-title">Prosecution</span>
          <span class="side-desc">Argue for conviction</span>
        </button>
        <button class="btn btn-side defense" data-side="defense">
          <span class="side-icon">&#9876;</span>
          <span class="side-title">Defense</span>
          <span class="side-desc">Argue for acquittal</span>
        </button>
      </div>

      <!-- Difficulty Selection -->
      <div class="settings-section">
        <h3>Difficulty</h3>
        <div id="difficulty-options" class="difficulty-grid">
          <!-- Difficulty options loaded dynamically -->
        </div>
      </div>

      <!-- Advanced Settings Toggle -->
      <div class="advanced-toggle">
        <button id="toggle-advanced" class="btn btn-secondary">Advanced Settings</button>
      </div>

      <!-- Advanced Settings Panel -->
      <div id="advanced-settings" class="advanced-panel hidden">
        <h3>Model Selection</h3>
        <p class="settings-note">Override the default model for this difficulty level</p>
        <div id="model-options" class="model-grid">
          <!-- Model options loaded dynamically -->
        </div>
      </div>
    </section>

    <!-- Screen: Debate -->
    <section id="debate-screen" class="screen">
      <div class="debate-header">
        <h2 id="debate-title">The Debate</h2>
        <div class="turn-indicator">
          Round <span id="current-turn">1</span> of <span id="max-turns">3</span>
        </div>
      </div>

      <div class="positions-bar">
        <div class="position you">
          <span class="position-label">YOU</span>
          <span id="your-side" class="position-side">Prosecution</span>
        </div>
        <div class="vs">VS</div>
        <div class="position ai">
          <span class="position-label">AI</span>
          <span id="ai-side" class="position-side">Defense</span>
        </div>
      </div>

      <div id="debate-log" class="debate-log">
        <!-- Debate exchanges will appear here -->
      </div>

      <div id="input-area" class="input-area">
        <div class="input-mode-toggle">
          <button class="mode-btn active" data-mode="manual" id="mode-manual">Write Myself</button>
          <button class="mode-btn" data-mode="assist" id="mode-assist">AI Assist</button>
        </div>
        <div id="manual-mode" class="input-mode">
          <textarea id="argument-input" placeholder="Type your argument here... Be persuasive, cite legal principles, and anticipate counterarguments." rows="4"></textarea>
        </div>
        <div id="assist-mode" class="input-mode hidden">
          <div class="assist-header">
            <div class="assist-options">
              <button class="assist-btn" id="generate-scratch">Generate from Scratch</button>
              <span class="assist-or">or</span>
            </div>
            <button class="btn-small" id="toggle-assist-settings">Settings</button>
          </div>
          <div id="assist-settings" class="assist-settings hidden">
            <div class="assist-setting-row">
              <label>Model:</label>
              <select id="assist-model">
                <!-- Populated by JS -->
              </select>
            </div>
            <div class="assist-setting-row">
              <label>Style:</label>
              <select id="assist-style">
                <option value="balanced">Balanced</option>
                <option value="aggressive">Aggressive</option>
                <option value="philosophical">Philosophical</option>
                <option value="precedent-heavy">Precedent-Heavy</option>
              </select>
            </div>
          </div>
          <textarea id="assist-prompt" placeholder="Describe your argument idea and AI will expand it... (e.g., 'Focus on the necessity defense and mention the Dudley case')" rows="3"></textarea>
          <button class="btn btn-secondary assist-expand-btn" id="expand-prompt">Expand My Idea</button>
          <div id="generated-preview" class="generated-preview hidden">
            <div class="preview-header">
              <span>Generated Argument</span>
              <button class="btn-small" id="regenerate">Regenerate</button>
            </div>
            <div id="preview-content" class="preview-content"></div>
            <div class="preview-actions">
              <button class="btn btn-secondary" id="edit-generated">Edit</button>
              <button class="btn btn-primary" id="use-generated">Use This</button>
            </div>
          </div>
        </div>
        <div class="input-actions">
          <span id="char-count" class="char-count">0 / 1000</span>
          <button id="submit-argument" class="btn btn-primary">Submit Argument</button>
        </div>
      </div>

      <div id="loading-indicator" class="loading hidden">
        <div class="spinner"></div>
        <span>AI is formulating a response...</span>
      </div>

      <button id="request-verdict" class="btn btn-verdict hidden">Request Final Verdict</button>
    </section>

    <!-- Screen: Verdict -->
    <section id="verdict-screen" class="screen">
      <div class="verdict-content">
        <div id="verdict-winner" class="verdict-winner">
          <!-- Winner announcement -->
        </div>

        <div class="scores-section">
          <h3>Scores</h3>
          <div class="scores-grid">
            <div class="score-card you">
              <h4>Your Scores</h4>
              <div class="score-items" id="human-scores">
                <!-- Human scores -->
              </div>
            </div>
            <div class="score-card ai">
              <h4>AI Scores</h4>
              <div class="score-items" id="ai-scores">
                <!-- AI scores -->
              </div>
            </div>
          </div>
        </div>

        <div class="feedback-section">
          <h3>Feedback for You</h3>
          <div class="feedback-grid">
            <div class="feedback-card strengths">
              <h4>What You Did Well</h4>
              <ul id="strengths-list"></ul>
            </div>
            <div class="feedback-card improvements">
              <h4>Areas to Improve</h4>
              <ul id="improvements-list"></ul>
            </div>
          </div>
          <div class="study-section">
            <h4>Concepts to Study</h4>
            <div id="concepts-list" class="concepts-tags"></div>
          </div>
        </div>

        <div class="takeaway-section">
          <h3>Key Takeaway</h3>
          <p id="key-takeaway" class="takeaway-text"></p>
        </div>

        <div class="judge-summary">
          <h3>Judge's Summary</h3>
          <p id="judge-summary-text"></p>
        </div>

        <button id="play-again" class="btn btn-primary">Argue Another Case</button>
      </div>
    </section>
  </div>

  <script src="/app.js"></script>
</body>
</html>
